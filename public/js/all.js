var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Confirmation=function(){function t(t,e){n.data("form-id","#"+t.attr("id")),n.data("callback-function",function(t,a){switch(a.status){case 422:Utility.displayErrorMessageBox(Object.values(a.responseJSON.errors).join("<br>"));break;case 200:if(a.hasOwnProperty("responseJSON")){var r=a.responseJSON;!0===r.success?(Utility.displaySuccessMessageBox(r.message),e.submit()):Utility.displayErrorMessageBox(r.message)}else Utility.displayJsonResponseError(a,t.attr("action"));break;default:Utility.displayUnknownError(a,t.attr("action"))}}),r.html(t.data("deletion-confirmation-message")+t.data("info")+"?"),a.modal()}function e(){n.click(function(t){t.preventDefault(),a.modal("toggle"),Utility.submitForm($(n.data("form-id")),n.data("callback-function"))})}var a=$("#confirmation-box"),r=$("#confirmation-text"),n=$("#yes-answer");return{confirmToDelete:t,initialize:e}}(jQuery),Form=function(){function t(){$("#join-form").click(function(t){window.console.log("test")}),e.submit(function(t){t.preventDefault(),Utility.submitForm($(this))}),a.submit(function(t){var e=this;t.preventDefault(),_submitEvent=function(){Utility.submitForm($(e))}}),n.on("click",function(t){t.preventDefault(),$(this).closest("form").submit()}),Search.SearchForm.submit(function(t){t.preventDefault(),Search.submitForm($(this))}),Search.ResultDiv.on("submit",r,function(t){t.preventDefault(),Confirmation.confirmToDelete($(this),Search.SearchForm)}),$(".deletion").submit(function(t){t.preventDefault(),Confirmation.confirmToDelete($(this),Search.SearchForm)})}var e=$(".submission-form"),a=$(".recaptcha-form"),r=".deletion",n=$(".form-submit");return{initialize:t}}(jQuery),Menu=function(){function t(){}return{initialize:t}}(jQuery),Search=function(){function t(t){r.removeClass("alert"),Utility.submitForm(t,function(t,e){switch(Utility.clearErrors(),e.status){case 422:Utility.displayInvalidInputs(e.responseJSON),r.html("");break;case 200:r.empty(),r.html(e.responseText.data),$("input[name=search]").empty();break;default:var a=e.statusText;e.hasOwnProperty("responseJSON")&&e.responseJSON.hasOwnProperty("message")&&(a=e.responseJSON.message),r.html(Translator.translate("utility.result.error")+" "+a).addClass("alert")}})}function e(){r.on("click",".pagination a",function(e){e.preventDefault();var a=document.createElement("form");a.setAttribute("method","GET"),a.setAttribute("action",$(this).attr("href")),t($(a))})}function a(){e(),$("#search-company").click(function(){$.ajax({url:$(this).data("url"),type:"GET",data:{search:$("input[name=company]").val()},success:function(t,e,a){window.console.log(t),$("#company-search-result").html(t.data)}})})}var r=$("#search-result"),n=$("#search-form");return{ResultDiv:r,SearchForm:n,initialize:a,submitForm:t}}(jQuery),Translator=function(){function t(){$.holdReady(!0);var t=[];Laravel.languageCodes.forEach(function(e){t.push($.getJSON("/languages/"+e+".json",{timestamp:Date.now()}))}),$.when.apply(this,t).then(function(){for(var t=0;t<arguments.length;t++)a.add({language:Laravel.languageCodes[t],data:arguments[t][0]});a.useLanguage(Laravel.currentLanguage)},function(){Utility.displayErrorMessageBox("Error! Failed to load some translation files, please contact the system administrator.")}).always(function(){$.holdReady(!1)})}function e(t){return a.translate(t)}var a=JSTranslate.i18n({language:Laravel.languageCodes,defaultLanguage:Laravel.defaultLanguage});return{initialize:t,translate:e}}(jQuery),Utility=function(){function t(t,e){r(),d.html(t),d.hasClass("alert")?e||(f.html(Translator.translate("utility.result.success")),d.removeClass("alert")):e&&(f.html(Translator.translate("utility.result.error")),d.addClass("alert")),m.modal()}function e(e){t(e,!1)}function a(e){t(e,!0)}function r(){$(":input").removeClass("error"),$(".alert.help-text").addClass("d-none")}function n(t){if(r(),t.hasOwnProperty("errors")){var e=0;for(var a in t.errors){var n=t.errors[a],o=/^[^.]+\.\d+$/.test(a)?a.replace(".",""):$('[name="'+a+'"]').attr("id"),i="object"===(void 0===n?"undefined":_typeof(n))?n[0]:n;if(o)$("#"+o).addClass("error"),$("#"+o+"-help-text").text(i).removeClass("d-none"),"budget_type"!==a&&"milerate_subtype"!==a&&"taxi_subtype"!==a&&"biketaxi_subtype"!==a||($("#"+a).addClass("error"),$("#"+a+"-help-text").text(i).removeClass("d-none")),$("#toggle-error-message").length&&0===e&&("milerate_subtype"===a||"taxi_subtype"===a||"biketaxi_subtype"===a?$("html, body").animate({scrollTop:$("#"+a+"-help-text").offset().top},1e3):$("html, body").animate({scrollTop:$("#"+o).offset().top},1e3));else{var s=$('[name="'+a+'[]"]').parents(".checkbox-group").attr("id");$("#"+s+"-help-text").text(i).removeClass("d-none")}e++}}}function o(t,e){r();var n="<h5>"+Translator.translate("utility.calling_system_administrator")+"</h5>";n+="<strong>"+Translator.translate("utility.error_url")+"</strong> "+e+"<br>",n+="<strong>"+Translator.translate("utility.error_status_code")+"</strong> "+t.status+"<br>",n+="<strong>"+Translator.translate("utility.error_status_text")+"</strong> "+t.statusText+"<br>",a(n)}function i(t,e){t.statusText=Translator.translate("utility.json_response_error"),o(t,e)}function s(t,r){switch(r.status){case 422:case 429:n(r.responseJSON);break;case 200:if(r.hasOwnProperty("responseJSON")){var s=r.responseJSON;!0===s.success?s.hasOwnProperty("message")?(m.on("hidden.bs.modal",function(){s.redirectedUrl?location.href=s.redirectedUrl:t.trigger("reset")}),e(s.message)):s.redirectedUrl&&(location.href=s.redirectedUrl):a(s.message)}else i(r,t.attr("action"));break;default:r.hasOwnProperty("responseJSON")&&r.responseJSON.hasOwnProperty("message")?a(r.responseJSON.message):o(r,t.attr("action"))}}function l(t,e,a){"function"==typeof a?a.apply(this,[t,e]):s(t,e)}function u(t){return"GET"===t.attr("method")?t.serialize():new FormData(t.get(0))}function c(t,e){$.ajax({url:t.attr("action"),method:t.attr("method"),data:u(t),cache:!1,contentType:!1,processData:!1,success:function(a,r,n){l(t,n,e)},error:function(a){l(t,a,e)}})}var m=$("#result-box"),f=$("#result-title"),d=$("#result-text");return{submitForm:c,displaySuccessMessageBox:e,displayErrorMessageBox:a,displayInvalidInputs:n,displayUnknownError:o,displayJsonResponseError:i,clearErrors:r,ResultBoxSelector:m,takeSubmitAction:s,runCallbackFunction:l,getFormData:u}}(jQuery),PasswordToggle=function(){function t(){$("#password-field").click(function(){$(".fa-eye").length?($("#password-field").html(""),$("#password-field").html('<i class="fa fa-eye-slash"></i>'),$("#password").attr("type","text")):($("#password-field").html(""),$("#password-field").html('<i class="fa fa-eye"></i>'),$("#password").attr("type","password"))})}return{initialize:t}}(jQuery),Footer=function(){function t(){$(".redirect_to").length&&$(".redirect_to").change(function(){"_blank"===$(this).attr("target")?window.open($(this).val(),"_blank"):window.location=$(this).val()}),$(window).resize(function(){$(window).width()<=768&&($(".menu-two-title").click(function(){$(".menu-one").hide(),$(".menu-two").show(),$(".menu-two-title").addClass("active"),$(".menu-one-title").removeClass("active")}),$(".menu-one-title").click(function(){$(".menu-two").hide(),$(".menu-one").show(),$(".menu-one-title").addClass("active"),$(".menu-two-title").removeClass("active")}))})}return{initialize:t}}(jQuery),SpinnerSelector=$("#spinner, #spinner-popup");Translator.initialize(),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(document).ajaxStart(function(){SpinnerSelector.show()}).ajaxComplete(function(){SpinnerSelector.hide()}).ready(function(){Menu.initialize(),Search.initialize(),Confirmation.initialize(),Form.initialize(),Footer.initialize(),PasswordToggle.initialize()});
